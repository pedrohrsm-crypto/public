/* ========================================
   PERFORMANCE OPTIMIZATIONS CSS
   Critical path CSS - Above the fold content
======================================== */

/* Critical CSS - Above the fold */
.critical {
  /* Styles for immediately visible content */
  font-display: swap; /* Optimize font loading */
}

/* Lazy Loading Styles */
.lazy-image {
  transition: opacity 0.3s ease-in-out;
  opacity: 0;
  background-color: #f0f0f0;
  background-image: 
    linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
  animation: shimmer 1.5s infinite linear;
}

.lazy-image.loaded {
  opacity: 1;
  background: none;
  animation: none;
}

.lazy-image.error {
  opacity: 1;
  background: #f8f8f8 url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAzMkMyNi42Mjc0IDMyIDMyIDI2LjYyNzQgMzIgMjBDMzIgMTMuMzcyNiAyNi42Mjc0IDggMjAgOEMxMy4zNzI2IDggOCAxMy4zNzI2IDggMjBDOCAyNi42Mjc0IDEzLjM3MjYgMzIgMjAgMzJaIiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIvPgo8cGF0aCBkPSJNMjAgMTNWMjEiIHN0cm9rZT0iIzlDQTNBRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTIwIDI1SDIwLjAxIiBzdHJva2U9IiM5Q0EzQUYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+Cjwvc3ZnPgo=') center/40px no-repeat;
  animation: none;
}

@keyframes shimmer {
  0% { background-position: 0 0, 0 10px, 10px -10px, -10px 0px; }
  100% { background-position: 20px 0, 20px 10px, 30px -10px, 10px 0px; }
}

/* Component Loading States */
.component-loading {
  min-height: 200px;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

.component-loaded {
  animation: fadeIn 0.5s ease-in;
}

.component-error {
  background: #fee;
  border: 1px solid #fcc;
  padding: 1rem;
  text-align: center;
  color: #c00;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Performance Critical Styles */
.performance-critical {
  /* Use GPU acceleration for smooth animations */
  transform: translateZ(0);
  will-change: transform;
}

/* Reduce layout shifts */
.prevent-cls {
  aspect-ratio: 16/9; /* Prevent cumulative layout shift */
}

/* Optimize font loading */
@font-face {
  font-family: 'Primary';
  src: url('../fonts/primary.woff2') format('woff2');
  font-display: swap; /* FOUT strategy */
  font-weight: 400;
  font-style: normal;
}

/* Critical path - inline only essential styles */
.above-fold {
  /* Styles for content above the fold */
  contain: layout style paint; /* CSS containment for performance */
}

/* Lazy loaded styles - load after critical path */
.below-fold {
  /* Non-critical styles loaded asynchronously */
  transform: translateZ(0); /* Enable GPU acceleration */
}

/* Preload hints for performance */
.preload-background {
  background-image: url('../images/hero-bg.webp');
  background-size: cover;
  background-position: center;
  /* Use WebP for better compression */
}

/* Responsive images with performance in mind */
.responsive-image {
  width: 100%;
  height: auto;
  object-fit: cover;
  /* Will be handled by JavaScript lazy loading */
}

/* Optimize for Core Web Vitals */
.optimize-lcp {
  /* Largest Contentful Paint optimization */
  content-visibility: auto; /* Skip rendering of off-screen content */
  contain-intrinsic-size: 300px; /* Placeholder size */
}

.optimize-fid {
  /* First Input Delay optimization */
  pointer-events: auto;
  touch-action: manipulation;
}

.optimize-cls {
  /* Cumulative Layout Shift prevention */
  aspect-ratio: attr(width) / attr(height);
  min-height: 200px; /* Prevent layout shift */
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .lazy-image,
  .component-loading,
  .component-loaded {
    animation: none;
    transition: none;
  }
}